### 首先配置配置文件`application-context.xml`
```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans.xsd
	http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context.xsd">
	
	<context:component-scan base-package="com.netease.course"/>
	
	<bean id="screwdriver" class="com.netease.course.ScrewDriver" scope="prototype">
		<constructor-arg>
			<ref bean="straightheader"/>
		</constructor-arg>
	</bean>
	
	<bean id="straightheader" class="com.netease.course.StraightHeader">
		<constructor-arg name="color" value="red"></constructor-arg>
		<constructor-arg name="size" value="10"></constructor-arg>
	</bean>
</beans>
```

### 然后在同一个包下面依次创建这三个类

1. `Header.java`

```
package com.netease.course;

public interface Header {
	public void doWork();
	public String getInfo();
}
```

2. `StraightHeader.java`

```
package com.netease.course;

//StraightHeader实现Header的接口
public class StraightHeader implements Header {
	private String color;
	private int size;
	
	public StraightHeader(String color, int size) {
		this.color = color;
		this.size = size;
	}
	
	public void doWork() {
		System.out.println("Do work with straight header");
	}

	public String getInfo() {
		return "Info:color="+color+",size="+size;
	}

}
```

3. ScrewDriver.java

```
package com.netease.course;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;



public class ScrewDriver {
	private Header header;
	private String driverColor;
	
//	构造函数接受Header的实现类
	public ScrewDriver(Header header) {
		this.header = header;
	}
	
	public void setDriverColor(String color) {
		this.driverColor = color;
	}
	
	public void showInfo() {
		System.out.println("Use " + driverColor + " screwdriver. " + "Use header:" + header.getInfo());
	}
	
	@PostConstruct
	public void init() {
		System.out.println("init the screwdriver");
	}
	
	@PreDestroy
	public void destroy() {
		System.out.println("destroy the screwdriver");
	}
	
}
```

### 创建测试的main函数
```
package com.netease.course;

import org.springframework.context.ApplicationContext;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {

	public static void main(String[] args) {
                //ApplicationContext可以理解为IOC容器
		ApplicationContext context = new ClassPathXmlApplicationContext("application-context.xml");
		ScrewDriver obj1 = context.getBean("screwdriver", ScrewDriver.class);
		obj1.setDriverColor("green");
		obj1.showInfo();
		ScrewDriver obj2 = context.getBean("screwdriver", ScrewDriver.class);
		obj2.setDriverColor("red");
		obj2.showInfo();
		System.out.println();
		
		//依赖注入
		StraightHeader obj3 = context.getBean("straightheader", StraightHeader.class);
		obj3.doWork();
		System.out.println(obj3.getInfo());
		System.out.println();
		
		//验证StraightHeader这个bean是单例
		StraightHeader obj4 = context.getBean("straightheader", StraightHeader.class);
		System.out.println(obj3);
		System.out.println(obj4);
		System.out.println();
		
		((ConfigurableApplicationContext)context).close();
	}

}
```
